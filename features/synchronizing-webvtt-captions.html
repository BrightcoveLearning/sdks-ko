
---
title: 'WebVTT 자막 동기화'
description: 이 주제에서는 오디오 및 비디오를 자막과 동기화하기 위해 HLS 비디오에 대한 WebVTT 캡션을 구성하는 방법을 배웁니다.
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">개요</h2>

<p>WebVTT(웹 비디오 텍스트 트랙) 파일은 캡션, 자막, 설명 등을 비디오의 시간 세그먼트와 연결하는 데 사용되는 간단한 텍스트 파일입니다.</p>

<pre class="line-numbers">
<code class="language-html" translate="No">WEBVTT

  00:00:03.50 --&gt; 00:00:05.000 align:middle line:84%
  In this video, you'll learn
  about how Video Cloud Studio is</code></pre>

<p>WebVTT 파일 추가에 대한 자세한 내용은<a href="https://player.support.brightcove.com/general/adding-captions-videos-programmatically.html">비디오에 캡션 추가</a>문서.</p>

<!-- <p>The <a href="https://github.com/brightcove/brightcove-player-sdk-ios-sidecarsubtitles">Sidecar Subtitles plugin</a> enables you to use WebVTT captions in your iOS and tvOS apps.</p> -->
</section>

<section class="bcls-section">
<h2 id="Add_a_metadata_header">메타데이터 헤더 추가</h2>

<p>HLS 사양의 일부로 다음을 추가해야 합니다. <code translate="No">X-TIMESTAMP-MAP</code>오디오와 비디오 간의 타임스탬프를 자막과 동기화하기 위해 메타데이터 헤더를 각 WebVTT 헤더에 추가합니다.</p>

<p>이 헤더가 없거나<code translate="No">MPEGTS</code>값이 올바르지 않으면 자막이 비디오와 동기화되지 않은 것을 볼 수 있습니다. 그 이유는<code translate="No">X-TIMESTAMP-MAP</code>헤더가 누락된 경우 클라이언트는 기본 타임스탬프 오프셋을 다음과 같이 가정합니다. <strong> 0</strong> . 예를 들어, <strong> 900000</strong>그리고<strong> 0</strong>캡션이 10초 동안 꺼질 수 있습니다.</p>

<p><code translate="No">X-TIMESTAMP-MAP</code>체재:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">X-TIMESTAMP-MAP=MPEGTS:&lt;MPEG-2 time&gt;,LOCAL:&lt;cue time&gt;</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="2" data-gist-hide-footer="true"></code></p> -->

<p>다음은 샘플 WebVTT 파일입니다.</p>

<aside class="bcls-aside bcls-aside--information">NS <code translate="No">X-TIMESTAMP-MAP</code>헤더는 2행 바로 뒤에 나타나야 합니다. <code translate="No">WEBVTT</code>선. 타임스탬프 헤더가 2행에 배치되지 않으면 예기치 않은 결과가 발생할 수 있습니다.</aside>

<pre class="line-numbers">
<code class="language-swift" translate="No">WEBVTT
<span class="bcls-highlight">X-TIMESTAMP-MAP=MPEGTS:900000,LOCAL:00:00:00.000</span>

1
00:00:03.500 --&gt; 00:00:05.000 align:middle line:84%
In this video, you'll learn
about how Video Cloud Studio is</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="5-11" data-gist-highlight-line="6" data-gist-hide-footer="true"></code></p> -->

<p>자세한 내용은<a href="https://tools.ietf.org/html/draft-pantos-http-live-streaming-18#section-3">자막 세그먼트</a> Apple의 HLS 프로토콜 문서 섹션.</p>
</section>

<section class="bcls-section">
<h2 id="Determine_the_offset_value">오프셋 값 결정</h2>

<p>Brightcove의 Dynamic Ingest 또는 Zencoder를 사용하여 콘텐츠를 트랜스코딩하는 경우 오프셋 값을 사용하십시오. <code translate="No">MPEGTS:900000</code> .</p>

<p>Zencoder 이외의 인코딩 시스템을 사용하고 있다면 필요한 값을 구하는 것이 가장 좋습니다. Apple은 인코딩된 비디오와 일치하도록 오프셋을 설정할 것을 권장합니다.</p>

<p>NS <code translate="No">MPEGTS</code>값은 주어진 시간에서 MPEG 프레임의 프리젠테이션 타임스탬프(PTS) 값에 해당합니다. <code translate="No">LOCAL</code>시각. Brightcove의 레거시 수집 시스템을 사용하는 경우 다음 값을 사용할 수 있습니다. <code translate="No">MPEGTS:0</code> .</p>

<p>계정이 활성화된 경우<a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">동적 전달</a> , 그리고 당신은 우리와 함께 캡션을 호스팅하고 있습니다 <em>(원격이 아닌 캡션)</em>, 그러면 모든 것이 자동으로 작동하도록 만들 것입니다(PTS는 0이어야 하고 우리는 그것이 0인지 확인할 것입니다.)</p>

<p>계정이 Dynamic Delivery에 대해 활성화되어 있고 사용 중인 경우<strong><em>원격</em></strong>캡션을 사용하려면 PTS 값을 0으로 설정해야 합니다.</p>

<p>예를 들어 오프셋 값을 얻으려면 다음을 수행할 수 있습니다.</p>

<h3>요청1:</h3>

<p>터미널에서 HLS 비디오를 가져와 로컬 파일에 저장합니다. 이 경우 이름을 지정합니다. <code translate="No">seg.ts</code> .</p>

<pre class="line-numbers">
<code class="language-http" translate="No">curl -o seg.ts "http://brightcove.vo.llnwd.net/v1/unsecured/media/4360108595001/201507/1154/4360341622001/4360108595001_4360341622001_s-1.ts?pubId=4360108595001&amp;videoId=4360283683001"</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="17-18"></code></p> -->

<h3>요청2:</h3>

<p>그런 다음 사용<code translate="No">ffprobe</code>오프셋 값을 가져오는 명령입니다. <code translate="No">ffprobe</code>는 멀티미디어 스트림 분석기입니다. <a href="//ffmpeg.org/about.html"> FFmpeg 프레임워크</a> . 이를 컴퓨터에 다운로드하여 설치해야 합니다.</p>

<pre class="line-numbers">
<code class="language-http" translate="No">ffprobe -show_frames seg.ts</code></pre>

<h3>응답:</h3>

<p>응답은 다음과 유사해야 합니다.</p>

<pre class="line-numbers">
<code class="language-html" translate="No"><span class="bcls-highlight">pkt_pts=900000</span>
pkt_pts_time=10.000000
pkt_dts=900000
pkt_dts_time=10.000000</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="21-24" data-gist-highlight-line="21" data-gist-hide-footer="true"></code></p> -->

<br/>
<aside class="bcls-aside bcls-aside--warning">X-TIMESTAMP-MAP 헤더를 추가하면 Windows Mobile 애플리케이션과 같은 다른 플랫폼에서 불일치가 발생할 수 있습니다. 오프셋 헤더를 추가한 후 모든 플랫폼에서 테스트해야 합니다. 이 헤더 태그의 추가는 HLS 사양 요구 사항이며 WebVTT 사양 매개 변수가 아닙니다.</aside>
</section>

<section class="bcls-section">
<h2 id="Best_practices">모범 사례</h2>

<p>다음 지침은 캡션이 있는 앱을 개발할 때 도움이 됩니다.</p>

<h3>자막 길이</h3>

<p>캡션 길이는 비디오 길이를 초과하지 않는 것이 좋습니다. 이렇게 하면 비디오 재생이 완료된 후 캡션이 표시되거나 진행률 표시줄의 탐색할 수 없는 영역이 표시되지 않습니다.</p>
</section>
</article>