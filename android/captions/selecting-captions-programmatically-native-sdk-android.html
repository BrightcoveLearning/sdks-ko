
---
title: 'Android용 네이티브 SDK를 사용하여 프로그래밍 방식으로 캡션 선택'
description: 이 주제에서는 Android용 Brightcove 네이티브 SDK를 사용할 때 프로그래밍 방식으로 캡션을 선택하는 방법을 배웁니다.
parent: Captions 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
  <h2 id="Overview">개요</h2>
  <p>
    Android용 네이티브 SDK는 다음 중 하나에서 캡션을 수신합니다.
  </p>
  <ul>
    <li>Brightcove 카탈로그 응답(재생 API): 사이드카 WebVTT</li>
    <li>동영상 매니페스트(HLS 또는 DASH): 매니페스트 내 WebVTT</li>
  </ul>
  <p>
    캡션에 대한 자세한 내용은<a href="https://sdks.support.brightcove.com/features/using-captions-brightcove-native-sdks.html"> Brightcove 네이티브 SDK에서 캡션 사용</a>문서.
  </p>
</section>

<section class="bcls-section">
  <h2 id="Event_sequence">이벤트 순서</h2>
  <p>
    네이티브 SDK는 캡션과 연결된 다음 이벤트 시퀀스를 따릅니다.
  </p>
  <ol class="bcls-tasklist">
    <li>
      <p>
        Brightcove 카탈로그에서 비디오를 검색합니다(예: <code translate="No">catalog.findVideoByID()</code> ).
      </p>
    </li>
    <li>
      <p>
        사이드카 캡션은 카탈로그 응답에서 구문 분석되어 비디오 속성에 추가됩니다.
      </p>
    </li>
    <li>
      <p>
        이 시점에서 다음과 같이 캡션 소스를 검색할 수 있습니다.
      </p>
      <pre><code class="language-java" translate="No">video.getProperties().get(Video.Fields.CAPTION_SOURCES);</code></pre>
    </li>
    <li>
      <p>
        비디오 보기를 설정합니다. 동영상이 ExoPlayer에 추가됩니다.
      </p>
      <pre><code class="language-java" translate="No">brightcoveVideoView.add(video);</code></pre>
    </li>
    <li>
      <p>
        네이티브 SDK는 캡션 소스를 가져오고 다음 이벤트를 내보냅니다.
      </p>
      <pre><code class="language-java" translate="No">EventType.CAPTIONS_LANGUAGES</code></pre>
    </li>
    <li>
      <p>
        비디오가 ExoPlayer에 추가된 후 네이티브 SDK는 매니페스트 내 캡션을 찾습니다. 비디오 캡션 소스에 아직 없는 캡션이 추가됩니다. 새 캡션 소스가 있는 경우 Brightcove 미디어 컨트롤러를 업데이트하기 위해 다음 이벤트가 전송됩니다.
      </p>
      <pre><code class="language-java" translate="No">EventType.CAPTIONS_LANGUAGES</code></pre>
    </li>
  </ol>
</section>

<section class="bcls-section">
  <h2 id="Select_captions">캡션 선택</h2>
  <p>
    프로그래밍 방식으로 캡션을 선택하려면 다음 단계를 따르세요.
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      <p>
        언어 코드로 특정 캡션 소스를 찾는 메서드를 만듭니다. 예를 들면 다음과 같습니다.
      </p>
      <pre><code class="language-java" translate="No">private Pair&lt;Uri, BrightcoveCaptionFormat&gt; getCaptionsForLanguageCode(Video video, String languageCode) {
 Object payload = video == null ? null : video.getProperties().get(Video.Fields.CAPTION_SOURCES);

if (payload instanceof List) {
 @SuppressWarnings(&quot;unchecked&quot;)
 List&lt;Pair&lt;Uri, BrightcoveCaptionFormat&gt;&gt; pairs =
    (List&lt;Pair&lt;Uri, BrightcoveCaptionFormat&gt;&gt;) payload;

 for (Pair&lt;Uri, BrightcoveCaptionFormat&gt; pair : pairs) {
   if (pair.second.language().equals(languageCode)) {
     return pair;
   }
 }
}
return null;
}</code></pre>
    </li>
    <li>
      <p>
        캡션 소스는<code translate="No">Pair&lt;Uri, BrightcoveCaptionFormat&gt;</code> . NS <code translate="No">Uri</code>쌍에서 폐쇄 캡션 유형을 나타냅니다.
      </p>
      <ul>
        <li>
          <strong>사이드카</strong> : 전체 URL이 있습니다.
        </li>
        <li>
          <strong>매니페스트 내</strong> : BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME가 사용됩니다.
        </li>
      </ul>
    </li>
    <li>
      <p>
        주어진 언어 코드를 사용하여 비디오에서 자막을 선택하는 메서드를 생성합니다. <code translate="No">EventType.SELECT_CLOSED_CAPTION_TRACK</code>이벤트.
      </p>
      <pre><code class="language-java" translate="No">private void selectCaption(Video video, String language) {
 Pair&lt;Uri, BrightcoveCaptionFormat&gt; pair = getCaptionsForLanguageCode(video, language);

if (pair != null &amp;&amp; !pair.first.equals(Uri.EMPTY)) {
 // BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME indicates that is not a URL we need to load with the LoadCaptionsService, but instead we'll be enabled through a different component.
 if (!pair.first.toString().startsWith(BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME)) {
   brightcoveVideoView.getClosedCaptioningController().getLoadCaptionsService().loadCaptions(pair.first, pair.second.type());
 }
 Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
 properties.put(Event.CAPTION_FORMAT, pair.second);
 properties.put(Event.CAPTION_URI, pair.first);
 brightcoveVideoView.getEventEmitter().emit(EventType.SELECT_CLOSED_CAPTION_TRACK, properties);
}
}</code></pre>
    </li>
    <li>
      <p>
        들어봐<code translate="No">EventType.CAPTIONS_LANGUAGES</code>이벤트를 선택하고 언어 코드로 원하는 언어를 선택하세요.
      </p>
      <pre><code class="language-java" translate="No">brightcoveVideoView.getEventEmitter().once(EventType.CAPTIONS_LANGUAGES, new EventListener() {
@Override
public void processEvent(Event event) {
 brightcoveVideoView.setClosedCaptioningEnabled(true);

  // You could find the desired languaged in the LANGUAGES list.
  // List&lt;String&gt; languages = event.getProperty(Event.LANGUAGES, List.class);
 selectCaption(brightcoveVideoView.getCurrentVideo(), &quot;ja&quot;);
}
});</code></pre>
    </li>

  </ol>
</section>

</article>