
---
title: 'ExoPlayer 2 프레임워크로 마이그레이션'
description: 이 주제에서는 Android용 Brightcove Native Player SDK와 함께 ExoPlayer 2 프레임워크를 사용하는 방법을 배웁니다.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">개요</h2>
<aside class="bcls-aside bcls-aside--information">
<p>ExoPlayer 1을 사용하는 Android용 Brightcove 네이티브 SDK는 더 이상 사용되지 않습니다.</p>

<p>필요한 경우 볼 수 있습니다. <a href="/android/reference/exoplayer1/javadoc/index.html"> ExoPlayer 1 참조 문서</a> , 하지만 ExoPlayer 2 Framework로 마이그레이션하는 것이 좋습니다.</p>
</aside>

<p><a href="https://google.github.io/ExoPlayer/">구글 엑소플레이어</a> Android용 오픈 소스 애플리케이션 수준 미디어 플레이어입니다. Brightcove는 ExoPlayer가 제공하는 이점을 활용합니다. ExoPlayer로 업그레이드할 때의 이점에 대한 자세한 내용은<a href="https://www.brightcove.com/en/blog/2018/01/brightcove-native-sdk-exoplayer-2"> ExoPlayer 2가 포함된 Brightcove 기본 SDK</a>블로그 게시물.</p>

<p>다음 프로젝트 유형에 대해 마이그레이션하는 방법을 알아보세요.</p>

<ul>
	<li><a href="#New_project">새로운 과제</a></li>
	<li><a href="#Existing_ExoPlayer_1_project">기존 ExoPlayer 1 프로젝트</a></li>
	<li><a href="#Existing_MediaPlayer_project">기존 MediaPlayer 프로젝트</a></li>
</ul>

<p>참조<a href="https://github.com/BrightcoveOS/android-player-samples"> ExoPlayer 샘플 애플리케이션</a>통합에 대한 추가 지침은<a href="https://medium.com/google-exoplayer/exoplayer-2-x-new-package-and-class-names-ef8e1d9ba96f">엑소플레이어 2</a>프로젝트에 프레임워크를 추가합니다.</p>
</section>

<section class="bcls-section">
<h2 id="New_project">새로운 과제</h2>

<p>새 Android 프로젝트에 ExoPlayer 2를 추가하려면 다음 단계를 따르세요.</p>

<ol class="bcls-tasklist">
	<li>당신의<strong> build.gradle</strong>파일에 다음 종속성을 추가합니다.

	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer2:${anpVersion}"
}</code></pre>
	</li>
	<li>설정<code translate="No">transitive</code>옵션<code translate="No">true</code>오프라인 재생 플러그인과 같은 다른 종속성을 자동으로 포함하도록 gradle에 지시합니다. 5 미만의 gradle 버전을 사용하는 경우<a href="https://docs.gradle.org/current/userguide/dependency_management.html">전이 종속성</a>기본적으로 꺼져 있습니다. 따라서 다음 명령문을 추가해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer2:${anpVersion}" <span class="bcls-highlight">{transitive = true}</span>
}</code></pre>
	</li>
	<li>SDK 버전에 대한 환경 변수를 사용하는 경우 다음을 엽니다. <strong> gradle.properties</strong>파일을 열고 Android용 Native SDK의 현재 버전 값을 설정합니다. 다음과 유사해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">anpVersion=6.5.0</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Existing_ExoPlayer_1_project">기존 ExoPlayer 1 프로젝트</h2>

<p>ExoPlayer 2 프레임워크를 사용하도록 기존 ExoPlayer 1 프로젝트를 업데이트하려면 다음 단계를 따르세요.</p>

<ol class="bcls-tasklist-restart">
	<li>당신의<strong>상수.gradle</strong>파일에서 Android 빌드 도구 버전을 업데이트합니다.

	<pre class="line-numbers">
<code class="language-java" translate="No">buildToolsVersion "28.0.2"
</code></pre>
	</li>
	<li>당신의<strong> build.gradle</strong>파일, Android 지원 라이브러리 업데이트:
	<pre class="line-numbers">
<code class="language-java" translate="No">implementation 'com.android.support:appcompat-v7:${APPCOMPAT_V7_VERSION}'
implementation 'com.android.support:support-v4:${SUPPORT_V4_VERSION}'
implementation 'com.android.support:recyclerview-v7:${SUPPORT_V4_VERSION}'
implementation 'com.android.support:support-vector-drawable:${SUPPORT_V4_VERSION}'
</code></pre>

	<p>상수의 현재 값은 다음에서 찾을 수 있습니다. <a href="https://github.com/BrightcoveOS/android-player-samples/blob/master/constants.gradle">상수.gradle</a>파일.</p>
	</li>
	<li>당신의<strong> build.gradle</strong>파일에 Google Maven 저장소를 추가합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">maven {
  url 'https://maven.google.com'
}
</code></pre>
	</li>
	<li>프로젝트에서 Google IMA로 광고를 사용하는 경우 Google Play 서비스 광고를 업데이트하세요.
	<pre class="line-numbers">
<code class="language-java" translate="No">implementation 'com.google.android.gms:play-services-ads:'+PLAY_SERVICES_VERSION
</code></pre>

	<aside class="bcls-aside bcls-aside--information">Android용 Brightcove Native Player SDK는 ExoPlayer와 ExoPlayer 2를 모두 사용하려는 애플리케이션을 지원하지 않는다는 점에 유의해야 합니다.</aside>
	</li>
	<li>당신의<strong> build.gradle</strong>이전에 다음과 같은 종속성으로 Brightcove ExoPlayer 라이브러리를 가져온 파일:
	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer:${anpVersion}"
}
</code></pre>

	<p>종속성 이름을 변경합니다.</p>

	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer2:${anpVersion}"
}
</code></pre>

	<p>Brightcove SDK 버전의 현재 값( <code translate="No">anpVersion</code> )에서 찾을 수 있습니다<a href="https://github.com/BrightcoveOS/android-player-samples/blob/master/gradle.properties"> gradle.properties</a>파일.</p>
	</li>
	<li>설정<code translate="No">transitive</code>옵션<code translate="No">true</code>오프라인 재생 플러그인과 같은 다른 종속성을 자동으로 포함하도록 gradle에 지시합니다. 5 미만의 gradle 버전을 사용하는 경우<a href="https://docs.gradle.org/current/userguide/dependency_management.html">전이 종속성</a>기본적으로 꺼져 있습니다. 따라서 다음을 추가해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
	implementation "com.brightcove.player:exoplayer2:${anpVersion}" <span class="bcls-highlight">{transitive = true}</span>
}</code></pre>
	</li>
	<li>SDK 버전에 대한 환경 변수를 사용하는 경우 다음을 엽니다. <strong> gradle.properties</strong>파일을 열고 Android용 Native SDK의 현재 버전 값을 설정합니다. 다음과 유사해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">anpVersion=6.5.0</code></pre>

	<p>ExoPlayer 2를 프로젝트에 통합하는 데 추가 코딩이 필요하지 않아야 합니다.</p>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Existing_MediaPlayer_project">기존 MediaPlayer 프로젝트</h2>

<p>ExoPlayer 2 프레임워크를 사용하도록 기존 MediaPlayer 프로젝트를 업데이트하려면 다음 단계를 따르세요.</p>

<ol class="bcls-tasklist-restart">
	<li>당신의<strong> build.gradle</strong>파일에 다음 종속성을 추가합니다.

	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer2:${anpVersion}"
}</code></pre>
	</li>
	<li>설정<code translate="No">transitive</code>옵션<code translate="No">true</code>오프라인 재생 플러그인과 같은 다른 종속성을 자동으로 포함하도록 gradle에 지시합니다. 5 미만의 gradle 버전을 사용하는 경우<a href="https://docs.gradle.org/current/userguide/managing_transitive_dependencies.html">전이 종속성</a>기본적으로 꺼져 있습니다. 따라서 다음을 추가해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">dependencies {
  implementation "com.brightcove.player:exoplayer2:${anpVersion}" <span class="bcls-highlight">{transitive = true}</span>
}</code></pre>
	</li>
	<li>SDK 버전에 대한 환경 변수를 사용하는 경우 다음을 엽니다. <strong> gradle.properties</strong>파일을 열고 Android용 Native SDK의 현재 버전 값을 설정합니다. 다음과 유사해야 합니다.
	<pre class="line-numbers">
<code class="language-java" translate="No">anpVersion=6.5.0</code></pre>
	</li>
	<li>앱에서<a href="/android/reference/javadoc/com/brightcove/player/view/BrightcoveExoPlayerVideoView.html"> BrightcoveExoPlayerVideoView</a>대신<a href="/android/reference/javadoc/com/brightcove/player/view/BrightcoveVideoView.html">브라이트코브비디오뷰</a> , Android 미디어 플레이어를 사용합니다.</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Breaking_changes">주요 변경 사항</h2>

<p>Android용 Brightcove 기본 SDK에 대한 다음 변경 사항은 ExoPlayer 2의 주요 변경 사항입니다. ExoPlayer 1의 사용은 Brightcove Native SDK에서 더 이상 사용되지 않습니다.</p>

<h3>ExoPlayerVideoDisplayComponent 내부 리스너</h3>

<p>NS <code translate="No">ExoPlayerVideoDisplayComponent</code>클래스를 사용하면 ExoPlayer 구성 요소의 상태를 가져오도록 리스너를 설정할 수 있습니다. 다음은 일부 청취자 목록입니다.</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>리스너 설정</th>
			<th>에 대한 상태 정보 수신</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>setDebugListener</td>
			<td>InfoListener</td>
		</tr>
		<tr>
			<td>setCaptionListener</td>
			<td>캡션 리스너</td>
		</tr>
		<tr>
			<td>setMetadataListener</td>
			<td>메타데이터 리스너</td>
		</tr>
		<tr>
			<td>setInternalErrorListener</td>
			<td>내부 오류 리스너</td>
		</tr>
	</tbody>
</table>

<p>다음은 ExoPlayer 2 사용에 대한 권장 사항입니다.</p>

<h4>InfoListener</h4>

<p>를 위해<code translate="No">InfoListener</code>인터페이스에서 다음과 같이 변경되었습니다.</p>

<ul>
	<li>NS <code translate="No">onAvailableRangeChanged</code>메소드가 제거되었습니다</li>
	<li>NS <code translate="No">onLoadStarted</code>방법에는 추가<code translate="No">length</code>매개변수</li>
</ul>

<p>예시: ExoPlayer 2를 사용하는 ExoPlayerVideoDisplayComponent</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public interface InfoListener {
void onVideoFormatEnabled(Format format, int trigger, long mediaTimeMs);
void onAudioFormatEnabled(Format format, int trigger, long mediaTimeMs);
void onDroppedFrames(int count, long elapsed);
void onBandwidthSample(int elapsedMs, long bytes, long bitrateEstimate);
void onLoadStarted(int sourceId, int type, int trigger, Format format,
				long mediaStartTimeMs, long mediaEndTimeMs);
void onLoadCompleted(int sourceId, long bytesLoaded, int type, int trigger, Format format,
				long mediaStartTimeMs, long mediaEndTimeMs, long elapsedRealtimeMs, long loadDurationMs);
void onDecoderInitialized(String decoderName, long initializedTimestampMs,
				long initializationDurationMs);
}</code></pre>

<h4>캡션 리스너</h4>

<p>NS <code translate="No">CaptionListener</code>인터페이스는 변경되지 않습니다.</p>

<p>예시: ExoPlayer v2를 사용하는 ExoPlayerVideoDisplayComponent</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public interface CaptionListener {
void onCues(List&lt;Cue&gt; cues);
}</code></pre>

<h4>메타데이터 리스너</h4>

<p>NS <code translate="No">MetadataListener</code>인터페이스는 ExoPlayer v2와 함께 도입되었습니다. 이전 사용<code translate="No">Id3MetadataListener</code>이제 더 이상 사용되지 않습니다.</p>

<p>예시: ExoPlayer v2를 사용하는 ExoPlayerVideoDisplayComponent</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public interface MetadataListener {
void onMetadata(Metadata metadata);
}</code></pre>

<p>새로운<code translate="No">MetadataListener</code>당신은받을 것이다<code translate="No">Metadadata</code>에 있는 개체<code translate="No">onMetadata</code>콜백. 더 이상 사용되지 않는<code translate="No">Id3MetadataListener</code> , Id3Frame 개체 목록을 받았습니다. 새 리스너를 사용하면 여전히 다음 목록을 얻을 수 있습니다. <code translate="No">Id3Frame</code>아래와 같은 객체:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">exoPlayerVideoDisplayComponent.setMetadataListener(new ExoPlayerVideoDisplayComponent.MetadataListener() {
@Override
public void onMetadata(Metadata metadata) {
 for(int i = 0; i &lt; metadata.length(); i++) {
		 Metadata.Entry entry = metadata.get(i);
		 if (entry instanceof Id3Frame) {
				 Id3Frame id3Frame = (Id3Frame) entry;
		 }
 }
}
});
</code></pre>

<h4>내부 오류 리스너</h4>

<p>NS <code translate="No">InternalErrorListener</code>인터페이스에 많은 변경 사항이 있습니다. 비교를 위해 아래 코드를 확인하십시오.</p>

<p>ExoPlayer v2를 사용하는 ExoPlayerVideoDisplayComponent</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public interface InternalErrorListener {
void onPlayerError(Exception e);
void onAudioTrackUnderrun(int bufferSize, long bufferSizeMs, long elapsedSinceLastFeedMs);
void onLoadError(int sourceId, IOException e);
void onDrmSessionManagerError(Exception e);
}
</code></pre>

<p>ExoPlayer v1( <strong>더 이상 사용되지 않는</strong> )</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public interface InternalErrorListener {
void onRendererInitializationError(Exception e);
void onAudioTrackInitializationError(AudioTrack.InitializationException e);
void onAudioTrackWriteError(AudioTrack.WriteException e);
void onAudioTrackUnderrun(int bufferSize, long bufferSizeMs, long elapsedSinceLastFeedMs);
void onDecoderInitializationError(MediaCodecTrackRenderer.DecoderInitializationException e);
void onCryptoError(MediaCodec.CryptoException e);
void onLoadError(int sourceId, IOException e);
void onDrmSessionManagerError(Exception e);
}
</code></pre>

<p>ExoPlayer 2를 사용할 때 발생하는 예외 유형<code translate="No">onPlayerError(Exception e)</code> ~이다<code translate="No">com.google.android.exoplayer2.ExoPlaybackException</code> , 그러나 이것은 미래에 변경될 수 있습니다.</p>

<p>com.google.android.exoplayer2.ExoPlaybackException을 사용하면 다음 예외 유형을 얻을 수 있습니다.</p>

<ul>
	<li><code translate="No">ExoPlaybackException.TYPE_SOURCE</code></li>
	<li><code translate="No">ExoPlaybackException.TYPE_RENDERER</code></li>
	<li><code translate="No">ExoPlaybackException.TYPE_UNEXPECTED</code></li>
</ul>

<p>다음을 가져와 오류의 원인을 검색할 수도 있습니다. <code translate="No">Throwable</code>대상<code translate="No">ExoPlaybackException.getSourceException()</code> .</p>

<h3>오프라인 재생 지원</h3>

<p>프로젝트에서<code translate="No">MediaDownloadable.setConfigurationBundle(Bundle)</code>방법을 사용하여 비디오 비트 전송률과 같은 다운로드 기본 설정을 지정한 후 다음과 같이 코드를 업데이트하십시오.</p>

<p>이전 형식(더 이상 사용되지 않음)</p>

<pre class="line-numbers">
<code class="language-java" translate="No">com.google.android.exoplayer.MediaFormat
</code></pre>

<p>새로운 형식</p>

<pre class="line-numbers">
<code class="language-java" translate="No">com.brightcove.player.model.MediaFormat
</code></pre>

<h3>레거시 미디어 API 클래스</h3>

<p>더 이상 사용되지 않는 레거시 Media API 클래스는<code translate="No">com.brightcove.player.media package</code> , Android용 Brightcove 네이티브 SDK에서 제거되었습니다.</p>

<p>미디어 클래스를 사용하고 있었다면 마이그레이션하고 사용을 시작해야 합니다. <code translate="No">com.brightcove.player.edge.Catalog</code>수업.</p>

<p>다음 클래스는 다음에서 이동되었습니다. <code translate="No">com.brightcove.player.media</code>에게<code translate="No">com.brightcove.player.model</code> :</p>

<ul>
	<li><code translate="No">DeliveryType.java</code></li>
	<li><code translate="No">CaptionType.java</code></li>
	<li><code translate="No">ErrorFields.java</code></li>
	<li><code translate="No">VideoFields.java</code></li>
</ul>

<aside class="bcls-aside bcls-aside--tip">이 네 가지 클래스 중 하나를 사용하는 경우 가져오기 패키지만 교체하면 모든 설정이 완료됩니다.</aside>
</section>

<section class="bcls-section">
<h2 id="Additional_Resources">추가 리소스</h2>

<p>ExoPlayer 2 프레임워크 사용에 대한 자세한 내용은 다음 문서를 참조하세요.</p>

<ul>
	<li><a href="https://medium.com/google-exoplayer/exoplayer-2-x-new-package-and-class-names-ef8e1d9ba96f">ExoPlayer 2 - 새로운 패키지 및 클래스 이름</a></li>
	<li><a href="https://google.github.io/ExoPlayer/guide.html">엑소플레이어 개발자 가이드</a></li>
</ul>
</section>
</article>